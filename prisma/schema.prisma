generator client {
  provider      = "prisma-client-rust"
  output        = "../src/db.rs"
  binaryTargets = ["native"]
}

generator erd {
  provider = "prisma-erd-generator"
  output   = "./erd.svg"
}

generator dbml {
  provider   = "prisma-dbml-generator"
  outputName = "dev.dbml"
}

generator docs {
  provider = "node node_modules/prisma-docs-generator"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  username    String @id
  displayName String

  posts    Post[]
  comments Comment[]
}

model Post {
  id      String @id
  content String

  comments Comment[] @relation()

  User         User   @relation(fields: [userUsername], references: [username])
  userUsername String
}

model Comment {
  id String @id

  postId String
  post   Post   @relation(fields: [postId], references: [id])

  User         User?   @relation(fields: [userUsername], references: [username])
  userUsername String?
}
